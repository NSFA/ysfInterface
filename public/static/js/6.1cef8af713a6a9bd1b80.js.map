{"version":3,"sources":["webpack:///static/js/6.1cef8af713a6a9bd1b80.js","webpack:///./src/components/page/monitoring.vue","webpack:///./src/components/page/monitoring.vue?2d0f","webpack:///monitoring.vue","webpack:///./src/javascript/wsUtil.js"],"names":["webpackJsonp","273","module","exports","__webpack_require__","Component","376","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","padding","padding-bottom","width","display","float","attrs","placeholder","icon","autofocus","model","value","callback","$$v","filter","expression","_v","ref","title","trigger","label","_l","serverInfo","x","_s","text-align","domProps","innerHTML","qrCode","qrImgDom","href","url","download","directives","name","rawName","arg","type","on","click","clearList","btnType","SET_RECORDING","recording","reloadList","data","wsListFilter","stripe","border","scopedSlots","_u","props","label-position","labelWidth","row","id","method","host","path","mime","_f","startTime","endTime","reqBody","key","index","prop","show-overflow-tooltip","margin-top","current-page","filterSet","currentPage","page-sizes","page-size","pageSize","layout","total","size-change","handleSizeChange","current-change","handleCurrentChange","_e","staticRenderFns","389","__webpack_exports__","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1__javascript_getData__","__WEBPACK_IMPORTED_MODULE_2__javascript_wsUtil__","__WEBPACK_IMPORTED_MODULE_3_moment__","__WEBPACK_IMPORTED_MODULE_3_moment___default","__WEBPACK_IMPORTED_MODULE_4_vuex__","computed","get","$store","state","set","commit","i","methods","val","SET_FILTER","initWsServer","wsPort","wsInited","wsClient","SET_WS","onmessage","onWsMessage","mounted","_this","then","res","perms","initList","SET_INIT_LIST","SET_WS_LIST","result","filters","momentFormat","a","locale","format","392","initWs","arguments","length","undefined","WebSocket","Error","onerror","error","console","onopen","e","info","onclose","setInterval","send"],"mappings":"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","file":"static/js/6.1cef8af713a6a9bd1b80.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 273:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(165)(\n  /* script */\n  __webpack_require__(389),\n  /* template */\n  __webpack_require__(376),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 376:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"iframe_slot\",\n    staticStyle: {\n      \"padding\": \"20px\"\n    }\n  }, [_c('el-col', {\n    staticStyle: {\n      \"padding-bottom\": \"20px\",\n      \"width\": \"200px\",\n      \"display\": \"inline-block\",\n      \"float\": \"right\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"搜索\",\n      \"icon\": \"search\",\n      \"autofocus\": true\n    },\n    model: {\n      value: (_vm.filter),\n      callback: function($$v) {\n        _vm.filter = $$v\n      },\n      expression: \"filter\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticStyle: {\n      \"padding-bottom\": \"20px\",\n      \"width\": \"500px\",\n      \"display\": \"inline-block\",\n      \"float\": \"right\"\n    }\n  }, [_c('el-popover', {\n    ref: \"popover1\",\n    attrs: {\n      \"title\": \"服务器信息\",\n      \"trigger\": \"hover\"\n    }\n  }, [_c('el-form', [_c('el-form-item', {\n    attrs: {\n      \"label\": \"拦截模式\"\n    }\n  }, [_c('span', [_vm._v(\"HTTP\")])]), _vm._v(\" \"), _vm._l((_vm.serverInfo.ipAddress), function(x) {\n    return [_c('el-form-item', {\n      attrs: {\n        \"label\": \"IP地址\"\n      }\n    }, [_c('span', [_vm._v(_vm._s(x))])])]\n  })], 2)], 1), _vm._v(\" \"), _c('el-popover', {\n    ref: \"popover2\",\n    attrs: {\n      \"title\": \"HTTPS 证书信息\",\n      \"trigger\": \"hover\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"text-align\": \"center\"\n    }\n  }, [_c('h4', [_vm._v(\"手机扫描下载\")]), _vm._v(\" \"), _c('div', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.qrCode.qrImgDom)\n    }\n  }), _vm._v(\" \"), _c('a', {\n    attrs: {\n      \"href\": _vm.qrCode.url,\n      \"download\": \"\"\n    }\n  }, [_c('el-button', [_vm._v(\"点击下载\")])], 1)])]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"popover\",\n      rawName: \"v-popover:popover2\",\n      arg: \"popover2\"\n    }],\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"获取证书\")]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"popover\",\n      rawName: \"v-popover:popover1\",\n      arg: \"popover1\"\n    }],\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"服务器信息\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.clearList\n    }\n  }, [_vm._v(\"Clear\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": _vm.btnType\n    },\n    on: {\n      \"click\": _vm.SET_RECORDING\n    }\n  }, [_vm._v(\" \" + _vm._s(_vm.recording ? \"Stop\" : \"Resume\"))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": _vm.reloadList\n    }\n  }, [_vm._v(\"Reload\")])], 1), _vm._v(\" \"), _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.wsListFilter,\n      \"stripe\": \"\",\n      \"border\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"expand\"\n    },\n    scopedSlots: _vm._u([\n      [\"default\", function(props) {\n        return [_c('el-form', {\n          staticClass: \"list-expand\",\n          attrs: {\n            \"label-position\": \"left\",\n            \"labelWidth\": \"150px\"\n          }\n        }, [_c('el-form-item', {\n          attrs: {\n            \"label\": \"id\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.id))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"method\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.method))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"Host\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.host))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"Path\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.path))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"MIME-Type\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.mime))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"startTime\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(_vm._f(\"momentFormat\")(props.row.startTime)))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"endTime\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(_vm._f(\"momentFormat\")(props.row.endTime)))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"reqBody\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.reqBody))])]), _vm._v(\" \"), _c('h3', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (props.row.reqHeader),\n            expression: \"props.row.reqHeader\"\n          }]\n        }, [_vm._v(\"Request Header\")]), _vm._v(\" \"), _vm._l((props.row.reqHeader), function(value, key, index) {\n          return [_c('el-form', {\n            attrs: {\n              \"labelWidth\": \"150px\"\n            }\n          }, [_c('el-form-item', {\n            attrs: {\n              \"label\": key\n            }\n          }, [_c('span', [_vm._v(_vm._s(value))])])], 1)]\n        }), _vm._v(\" \"), _c('h3', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (props.row.resHeader),\n            expression: \"props.row.resHeader\"\n          }]\n        }, [_vm._v(\"Response Header\")]), _vm._v(\" \"), _vm._l((props.row.resHeader), function(value, key, index) {\n          return [_c('el-form', {\n            attrs: {\n              \"labelWidth\": \"150px\"\n            }\n          }, [_c('el-form-item', {\n            attrs: {\n              \"label\": key\n            }\n          }, [_c('span', [_vm._v(_vm._s(value))])])], 1)]\n        })], 2)]\n      }]\n    ])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"id\",\n      \"label\": \"#\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"timeZh\",\n      \"label\": \"时间\",\n      \"width\": \"200\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"protocol\",\n      \"label\": \"协议\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"method\",\n      \"label\": \"Method\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"statusCode\",\n      \"label\": \"Status\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"host\",\n      \"label\": \"Host\",\n      \"width\": \"200\",\n      \"show-overflow-tooltip\": true\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"path\",\n      \"label\": \"PATH\",\n      \"show-overflow-tooltip\": true\n    }\n  })], 1), _vm._v(\" \"), (_vm.filter.length) ? [_c('el-pagination', {\n    staticStyle: {\n      \"margin-top\": \"20px\",\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"current-page\": _vm.filterSet.currentPage,\n      \"page-sizes\": [20, 50, 100],\n      \"page-size\": _vm.filterSet.pageSize,\n      \"layout\": \"total, sizes, prev, pager, next\",\n      \"total\": _vm.filterSet.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })] : _vm._e()], 2)\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 389:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__javascript_getData__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__javascript_wsUtil__ = __webpack_require__(392);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vuex__ = __webpack_require__(168);\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      serverInfo: {},\n      qrCode: {} };\n  },\n\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({\n    filter: {\n      get: function get() {\n        return this.$store.state.filter;\n      },\n      set: function set(value) {\n        this.$store.commit('SET_WS_LIST_FILTER', value);\n      }\n    },\n\n    btnType: function btnType() {\n      return this.recording ? \"warning\" : \"primary\";\n    }\n  }, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"b\" /* mapState */])([\"recording\", \"wsInited\", \"initList\", \"filterSet\"]), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"c\" /* mapGetters */])(['wsListFilter'])),\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"d\" /* mapMutations */])(['SET_WS', 'SET_WS_LIST', 'SET_WS_LIST_FILTER', 'SET_RECORDING', 'SET_INIT_LIST', 'SET_FILTER']), __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"e\" /* mapActions */])(['reloadList', 'clearList', 'onWsMessage']), {\n    handleSizeChange: function handleSizeChange(val) {\n      this.SET_FILTER({\n        pageSize: val\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.SET_FILTER({\n        currentPage: val\n      });\n    },\n    initWsServer: function initWsServer(wsPort) {\n      if (!wsPort || this.wsInited) {\n        return;\n      }\n\n      var wsClient = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__javascript_wsUtil__[\"a\" /* initWs */])(wsPort);\n      this.SET_WS(true);\n\n      wsClient.onmessage = this.onWsMessage;\n    }\n  }),\n  mounted: function mounted() {\n    var _this = this;\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__javascript_getData__[\"k\" /* _getQrCode */])().then(function (res) {\n      _this.qrCode = res.data;\n    });\n\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__javascript_getData__[\"l\" /* _getInitData */])().then(function (perms) {\n      _this.initWsServer(perms.data.wsPort);\n      _this.serverInfo = perms.data;\n    });\n\n    if (!this.initList) {\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__javascript_getData__[\"a\" /* _getlatestLog */])().then(function (res) {\n\n        _this.SET_INIT_LIST(true);\n        _this.SET_WS_LIST({\n          type: \"init\",\n          data: res.data.result\n        });\n      });\n    }\n  },\n\n\n  filters: {\n    momentFormat: function momentFormat(value) {\n      if (!value) return \"--\";\n      __WEBPACK_IMPORTED_MODULE_3_moment___default.a.locale(\"zh-cn\");\n      return __WEBPACK_IMPORTED_MODULE_3_moment___default()(value).format('lll');\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 392:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = initWs;\nfunction initWs() {\n  var wsPort = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8003;\n  var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n\n  if (!WebSocket) {\n    throw new Error('WebSocket is not supported on this browser');\n  }\n\n  var wsClient = new WebSocket('ws://59.111.99.122:' + wsPort + '/' + key);\n\n  wsClient.onerror = function (error) {\n    console.error(error);\n  };\n\n  wsClient.onopen = function (e) {\n    console.info('websocket opened: ', e);\n  };\n\n  wsClient.onclose = function (e) {\n    console.info('websocket closed: ', e);\n  };\n\n  setInterval(function () {\n\n    wsClient.send('pump...');\n    console.info(\"pump...\");\n  }, 1000 * 60 * 5);\n\n  return wsClient;\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = ({\n  initWs: initWs\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/6.1cef8af713a6a9bd1b80.js","var Component = require(\"!../../../node_modules/.11.2.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.11.2.0@vue-loader/lib/selector?type=script&index=0!./monitoring.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.11.2.0@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-73040810\\\"}!../../../node_modules/.11.2.0@vue-loader/lib/selector?type=template&index=0!./monitoring.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/monitoring.vue\n// module id = 273\n// module chunks = 6","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"iframe_slot\",\n    staticStyle: {\n      \"padding\": \"20px\"\n    }\n  }, [_c('el-col', {\n    staticStyle: {\n      \"padding-bottom\": \"20px\",\n      \"width\": \"200px\",\n      \"display\": \"inline-block\",\n      \"float\": \"right\"\n    }\n  }, [_c('el-input', {\n    attrs: {\n      \"placeholder\": \"搜索\",\n      \"icon\": \"search\",\n      \"autofocus\": true\n    },\n    model: {\n      value: (_vm.filter),\n      callback: function($$v) {\n        _vm.filter = $$v\n      },\n      expression: \"filter\"\n    }\n  })], 1), _vm._v(\" \"), _c('el-col', {\n    staticStyle: {\n      \"padding-bottom\": \"20px\",\n      \"width\": \"500px\",\n      \"display\": \"inline-block\",\n      \"float\": \"right\"\n    }\n  }, [_c('el-popover', {\n    ref: \"popover1\",\n    attrs: {\n      \"title\": \"服务器信息\",\n      \"trigger\": \"hover\"\n    }\n  }, [_c('el-form', [_c('el-form-item', {\n    attrs: {\n      \"label\": \"拦截模式\"\n    }\n  }, [_c('span', [_vm._v(\"HTTP\")])]), _vm._v(\" \"), _vm._l((_vm.serverInfo.ipAddress), function(x) {\n    return [_c('el-form-item', {\n      attrs: {\n        \"label\": \"IP地址\"\n      }\n    }, [_c('span', [_vm._v(_vm._s(x))])])]\n  })], 2)], 1), _vm._v(\" \"), _c('el-popover', {\n    ref: \"popover2\",\n    attrs: {\n      \"title\": \"HTTPS 证书信息\",\n      \"trigger\": \"hover\"\n    }\n  }, [_c('div', {\n    staticStyle: {\n      \"text-align\": \"center\"\n    }\n  }, [_c('h4', [_vm._v(\"手机扫描下载\")]), _vm._v(\" \"), _c('div', {\n    domProps: {\n      \"innerHTML\": _vm._s(_vm.qrCode.qrImgDom)\n    }\n  }), _vm._v(\" \"), _c('a', {\n    attrs: {\n      \"href\": _vm.qrCode.url,\n      \"download\": \"\"\n    }\n  }, [_c('el-button', [_vm._v(\"点击下载\")])], 1)])]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"popover\",\n      rawName: \"v-popover:popover2\",\n      arg: \"popover2\"\n    }],\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"获取证书\")]), _vm._v(\" \"), _c('el-button', {\n    directives: [{\n      name: \"popover\",\n      rawName: \"v-popover:popover1\",\n      arg: \"popover1\"\n    }],\n    attrs: {\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(\"服务器信息\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"success\"\n    },\n    on: {\n      \"click\": _vm.clearList\n    }\n  }, [_vm._v(\"Clear\")]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": _vm.btnType\n    },\n    on: {\n      \"click\": _vm.SET_RECORDING\n    }\n  }, [_vm._v(\" \" + _vm._s(_vm.recording ? \"Stop\" : \"Resume\"))]), _vm._v(\" \"), _c('el-button', {\n    attrs: {\n      \"type\": \"info\"\n    },\n    on: {\n      \"click\": _vm.reloadList\n    }\n  }, [_vm._v(\"Reload\")])], 1), _vm._v(\" \"), _c('el-table', {\n    staticStyle: {\n      \"width\": \"100%\"\n    },\n    attrs: {\n      \"data\": _vm.wsListFilter,\n      \"stripe\": \"\",\n      \"border\": \"\"\n    }\n  }, [_c('el-table-column', {\n    attrs: {\n      \"type\": \"expand\"\n    },\n    scopedSlots: _vm._u([\n      [\"default\", function(props) {\n        return [_c('el-form', {\n          staticClass: \"list-expand\",\n          attrs: {\n            \"label-position\": \"left\",\n            \"labelWidth\": \"150px\"\n          }\n        }, [_c('el-form-item', {\n          attrs: {\n            \"label\": \"id\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.id))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"method\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.method))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"Host\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.host))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"Path\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.path))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"MIME-Type\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.mime))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"startTime\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(_vm._f(\"momentFormat\")(props.row.startTime)))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"endTime\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(_vm._f(\"momentFormat\")(props.row.endTime)))])]), _vm._v(\" \"), _c('el-form-item', {\n          attrs: {\n            \"label\": \"reqBody\"\n          }\n        }, [_c('span', [_vm._v(_vm._s(props.row.reqBody))])]), _vm._v(\" \"), _c('h3', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (props.row.reqHeader),\n            expression: \"props.row.reqHeader\"\n          }]\n        }, [_vm._v(\"Request Header\")]), _vm._v(\" \"), _vm._l((props.row.reqHeader), function(value, key, index) {\n          return [_c('el-form', {\n            attrs: {\n              \"labelWidth\": \"150px\"\n            }\n          }, [_c('el-form-item', {\n            attrs: {\n              \"label\": key\n            }\n          }, [_c('span', [_vm._v(_vm._s(value))])])], 1)]\n        }), _vm._v(\" \"), _c('h3', {\n          directives: [{\n            name: \"show\",\n            rawName: \"v-show\",\n            value: (props.row.resHeader),\n            expression: \"props.row.resHeader\"\n          }]\n        }, [_vm._v(\"Response Header\")]), _vm._v(\" \"), _vm._l((props.row.resHeader), function(value, key, index) {\n          return [_c('el-form', {\n            attrs: {\n              \"labelWidth\": \"150px\"\n            }\n          }, [_c('el-form-item', {\n            attrs: {\n              \"label\": key\n            }\n          }, [_c('span', [_vm._v(_vm._s(value))])])], 1)]\n        })], 2)]\n      }]\n    ])\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"id\",\n      \"label\": \"#\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"timeZh\",\n      \"label\": \"时间\",\n      \"width\": \"200\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"protocol\",\n      \"label\": \"协议\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"method\",\n      \"label\": \"Method\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"statusCode\",\n      \"label\": \"Status\",\n      \"width\": \"100\"\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"host\",\n      \"label\": \"Host\",\n      \"width\": \"200\",\n      \"show-overflow-tooltip\": true\n    }\n  }), _vm._v(\" \"), _c('el-table-column', {\n    attrs: {\n      \"prop\": \"path\",\n      \"label\": \"PATH\",\n      \"show-overflow-tooltip\": true\n    }\n  })], 1), _vm._v(\" \"), (_vm.filter.length) ? [_c('el-pagination', {\n    staticStyle: {\n      \"margin-top\": \"20px\",\n      \"float\": \"right\"\n    },\n    attrs: {\n      \"current-page\": _vm.filterSet.currentPage,\n      \"page-sizes\": [20, 50, 100],\n      \"page-size\": _vm.filterSet.pageSize,\n      \"layout\": \"total, sizes, prev, pager, next\",\n      \"total\": _vm.filterSet.total\n    },\n    on: {\n      \"size-change\": _vm.handleSizeChange,\n      \"current-change\": _vm.handleCurrentChange\n    }\n  })] : _vm._e()], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.11.2.0@vue-loader/lib/template-compiler?{\"id\":\"data-v-73040810\"}!./~/.11.2.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/page/monitoring.vue\n// module id = 376\n// module chunks = 6","<template>\n  <div class=\"iframe_slot\" style=\"padding: 20px;\">\n    <el-col style=\"padding-bottom: 20px;width: 200px;display: inline-block;float: right;\">\n      <el-input\n        placeholder=\"搜索\"\n        icon=\"search\"\n        v-model=\"filter\"\n        :autofocus=\"true\">\n      </el-input>\n    </el-col>\n    <el-col style=\"padding-bottom: 20px;width: 500px;display: inline-block;float:right;\">\n      <el-popover\n        ref=\"popover1\"\n        title=\"服务器信息\"\n        trigger=\"hover\">\n        <el-form>\n          <el-form-item label=\"拦截模式\">\n            <span>HTTP</span>\n          </el-form-item>\n          <template v-for=\"x in serverInfo.ipAddress\">\n            <el-form-item label=\"IP地址\">\n              <span>{{x}}</span>\n            </el-form-item>\n          </template>\n        </el-form>\n      </el-popover>\n      <el-popover\n        ref=\"popover2\"\n        title=\"HTTPS 证书信息\"\n        trigger=\"hover\">\n        <div style=\"text-align: center\">\n          <h4>手机扫描下载</h4>\n          <div v-html=\"qrCode.qrImgDom\"></div>\n          <a :href=\"qrCode.url\" download>\n            <el-button>点击下载</el-button>\n          </a>\n        </div>\n      </el-popover>\n      <el-button v-popover:popover2 type=\"primary\">获取证书</el-button>\n      <el-button v-popover:popover1 type=\"primary\">服务器信息</el-button>\n      <el-button type=\"success\" @click=\"clearList\">Clear</el-button>\n      <el-button :type=\"btnType\" @click=\"SET_RECORDING\"> {{recording ? \"Stop\" : \"Resume\"}}</el-button>\n      <el-button type=\"info\" @click=\"reloadList\">Reload</el-button>\n    </el-col>\n    <el-table\n      :data=\"wsListFilter\"\n      style=\"width: 100%\" stripe border>\n      <el-table-column type=\"expand\">\n        <template scope=\"props\">\n          <el-form label-position=\"left\" class=\"list-expand\" labelWidth=\"150px\">\n            <el-form-item label=\"id\">\n              <span>{{ props.row.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"method\">\n              <span>{{ props.row.method }}</span>\n            </el-form-item>\n            <el-form-item label=\"Host\">\n              <span>{{ props.row.host}}</span>\n            </el-form-item>\n            <el-form-item label=\"Path\">\n              <span>{{ props.row.path }}</span>\n            </el-form-item>\n            <el-form-item label=\"MIME-Type\">\n              <span>{{ props.row.mime }}</span>\n            </el-form-item>\n            <el-form-item label=\"startTime\">\n              <span>{{ props.row.startTime | momentFormat }}</span>\n            </el-form-item>\n            <el-form-item label=\"endTime\">\n              <span>{{ props.row.endTime | momentFormat}}</span>\n            </el-form-item>\n            <el-form-item label=\"reqBody\">\n              <span>{{ props.row.reqBody }}</span>\n            </el-form-item>\n            <h3 v-show=\"props.row.reqHeader\">Request Header</h3>\n            <template v-for=\"(value,key,index) in props.row.reqHeader\">\n              <el-form labelWidth=\"150px\">\n                <el-form-item :label=\"key\">\n                  <span>{{value}}</span>\n                </el-form-item>\n              </el-form>\n            </template>\n            <h3 v-show=\"props.row.resHeader\">Response Header</h3>\n            <template v-for=\"(value,key,index) in props.row.resHeader\">\n              <el-form labelWidth=\"150px\">\n                <el-form-item :label=\"key\">\n                  <span>{{value}}</span>\n                </el-form-item>\n              </el-form>\n            </template>\n          </el-form>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"id\"\n        label=\"#\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"timeZh\"\n        label=\"时间\"\n        width=\"200\">\n      </el-table-column>\n      <el-table-column\n        prop=\"protocol\"\n        label=\"协议\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"method\"\n        label=\"Method\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"statusCode\"\n        label=\"Status\"\n        width=\"100\">\n      </el-table-column>\n      <el-table-column\n        prop=\"host\"\n        label=\"Host\"\n        width=\"200\"\n        :show-overflow-tooltip=\"true\">\n      </el-table-column>\n      <el-table-column\n        prop=\"path\"\n        label=\"PATH\" :show-overflow-tooltip=\"true\">\n      </el-table-column>\n    </el-table>\n    <template v-if=\"filter.length\">\n      <el-pagination\n        style=\"margin-top: 20px;float: right\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"filterSet.currentPage\"\n        :page-sizes=\"[20, 50, 100]\"\n        :page-size=\"filterSet.pageSize\"\n        layout=\"total, sizes, prev, pager, next\"\n        :total=\"filterSet.total\">\n      </el-pagination>\n    </template>\n  </div>\n</template>\n<script>\n  import {_getInitData, _getlatestLog, _getReqBody, _getQrCode} from '../../javascript/getData'\n  import {initWs} from '../../javascript/wsUtil'\n  import moment from  'moment'\n  import{mapState, mapMutations, mapGetters, mapActions} from 'vuex'\n  export default{\n    data(){\n      return {\n        serverInfo: {}, //服务器信息\n        qrCode: {} //二维码信息\n      }\n    },\n    computed: {\n      //筛选字符串\n      filter: {\n        get () {\n          return this.$store.state.filter\n        },\n        set (value) {\n          this.$store.commit('SET_WS_LIST_FILTER', value)\n        }\n      },\n\n      //暂停开关样式\n      btnType(){\n        return this.recording ? \"warning\" : \"primary\"\n      },\n\n      ...mapState([\"recording\", \"wsInited\", \"initList\", \"filterSet\"]),\n\n      ...mapGetters(['wsListFilter']),\n    },\n\n    methods: {\n\n      ...mapMutations(['SET_WS', 'SET_WS_LIST', 'SET_WS_LIST_FILTER', 'SET_RECORDING', 'SET_INIT_LIST', 'SET_FILTER']),\n\n      ...mapActions(['reloadList', 'clearList', 'onWsMessage']),\n\n\n      /**\n       * 筛选时，单页条数改变\n       */\n      handleSizeChange(val){\n        this.SET_FILTER({\n          pageSize: val\n        })\n      },\n\n      /**\n       *筛选时，当前页数改变\n       */\n      handleCurrentChange(val){\n        this.SET_FILTER({\n          currentPage: val\n        })\n      },\n\n      /**\n       * 初始化Ws对象\n       * @param wsPort\n       */\n      initWsServer(wsPort) {\n        if (!wsPort || this.wsInited) {\n          return;\n        }\n\n        const wsClient = initWs(wsPort);\n        this.SET_WS(true);\n\n        wsClient.onmessage = this.onWsMessage;\n      },\n\n    },\n    mounted(){\n\n      /**\n       * 获取https证书二维码\n       */\n      _getQrCode().then((res) => {\n        this.qrCode = res.data;\n      });\n\n\n      /**\n       * 获取服务器初始化信息\n       */\n      _getInitData().then((perms) => {\n        this.initWsServer(perms.data.wsPort);\n        this.serverInfo = perms.data;\n      });\n\n      /**\n       * 如果没有初始化过，\n       * 拉取记录列表\n       */\n      if (!this.initList) {\n        _getlatestLog().then((res) => {\n\n          this.SET_INIT_LIST(true);\n          this.SET_WS_LIST({\n            type: \"init\",\n            data: res.data.result\n          })\n\n        });\n      }\n    },\n\n    filters: {\n      momentFormat(value){\n        if (!value)return \"--\";\n        moment.locale(\"zh-cn\");\n        return moment(value).format('lll');\n      }\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// monitoring.vue?0c1442fa","export function initWs(wsPort = 8003, key = '') {\n  if (!WebSocket) {\n    throw (new Error('WebSocket is not supported on this browser'));\n  }\n//59.111.99.122\n  const wsClient = new WebSocket(`ws://59.111.99.122:${wsPort}/${key}`);\n\n  wsClient.onerror = (error) => {\n    console.error(error);\n  };\n\n  wsClient.onopen = (e) => {\n    console.info('websocket opened: ', e);\n  };\n\n  wsClient.onclose = (e) => {\n    console.info('websocket closed: ', e);\n  };\n\n  //5分钟发送一条垃圾信息\n  setInterval(function () {\n\n    wsClient.send('pump...');\n    console.info(\"pump...\")\n\n  }, 1000 * 60 * 5);\n\n  return wsClient;\n}\n\nexport default {\n  initWs\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/javascript/wsUtil.js"],"sourceRoot":""}